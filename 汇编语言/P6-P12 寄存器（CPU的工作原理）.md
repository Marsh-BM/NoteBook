P6-P12 寄存器（CPU的工作原理）



CPU概述：

一个典型的CPU由运算器，控制器，寄存器等器件组成，这些器件靠内部的总线相连接。

*内部总线实现CPU内部各个器件之间的联系。

  外部总线实现CPU和主板上其他器件的联系。

-------------------------------------------------------------------------------------

2.1 通用寄存器

AX，BX，CX，DX，通常用于存放一般性数据被称为通用寄存器。一般是16位。

EX：数字18，二进制表示10010，寄存器中为：000000000010010（总之前面都用0填充）

16位寄存器最大储存2的16次方-1.

EAX 一般是32位

**注意：为了保证寄存器的兼容性，AX、BX，CX，DX都可以分为两个独立的八位寄存器使用。**

**AX可以分为AH和AL。**

**依此类推**

-------------------------------------------------------

2.2 字在寄存器中的存储

一个字可以存在一个16位的寄存器中，也就是说**word=2B**

--------------



2.3 几条汇编指令

![image-20211111094619146](C:\Users\白木-泽\AppData\Roaming\Typora\typora-user-images\image-20211111094619146.png)



加后缀，B表示二进制，O表示八进制，D表示10进制，H表示16进制

al不会主动进位。

------------------------

2.4 物理地址

CPU访问内存单元要给出内存单元的地址，所有的内存单元构成存储空间是一个一维的线性空间。我们称这个唯一的地址为物理地址。

-------------------------

2.5 16位结构的CPU

一个16位结构描述了一个CPU具有以下几个方面的特征：

1. 运算器一次最多可以处理16位的数据。

2. 寄存器的最大宽度位16。

3. 寄存器和运算器之间的通路是16位的。

   

---------------------------

2.6 8086CPU给出物理地址的方法。



![image-20211111110635545](C:\Users\白木-泽\AppData\Roaming\Typora\typora-user-images\image-20211111110635545.png)



![image-20211111110807707](C:\Users\白木-泽\AppData\Roaming\Typora\typora-user-images\image-20211111110807707.png)



---------------------------

地址加法器的工作原理

地址加法器合成物理地址的方法：

​	**物理地址 = 段地址*16 + 偏移地址** 

偏移地址最大为64KB，换为十六进制即是10000，因为由0开始，则最终为64KB的最后一个数是ffff

但是同样的结果可以对应多个不同的值。

段地址*16=16机制向左移动一位数，二进制向左移动4位。

![image-20211111111545424](C:\Users\白木-泽\AppData\Roaming\Typora\typora-user-images\image-20211111111545424.png)



----------------

2.8段的概念

![image-20211111120314563](C:\Users\白木-泽\AppData\Roaming\Typora\typora-user-images\image-20211111120314563.png)



![image-20211111120647216](C:\Users\白木-泽\AppData\Roaming\Typora\typora-user-images\image-20211111120647216.png)



2.9 段寄存器

  段寄存器就是提供段地址的

  以8086CPU举例，有CS（代码段地址寄存器），DS（数据段寄存器），SS（堆栈段寄存器）， ES（附加段寄存器）四个段寄存器。

当CPU访问内存时，由这四个寄存器提供内存单元的段地址。

---------------------

2.10 CS和IP

  CS和IP是8086CPU中最关键的寄存器，它们指示了CPU当前要读取的指令的地址

（CS是代码段地址寄存器，IP为指令指针寄存器）

![image-20211111192511815](C:\Users\白木-泽\AppData\Roaming\Typora\typora-user-images\image-20211111192511815.png)



![image-20211111192837679](C:\Users\白木-泽\AppData\Roaming\Typora\typora-user-images\image-20211111192837679.png)



-----------------------

2.11 修改CS，IP的指令

同时修改CS和IP的内容：

格式：**jmp 段地址 ：偏移地址**

例题：jmp 2AE3 ：3 --------物理地址：2AE33H

​            jmp 3 ： 0B16--------物理地址：0B46H

仅修改IP的内容：

格式：**jmp 某一合法寄存器**

例题：jmp ax

​			jmp bx

**功能：用于寄存器中的值的修改IP**

执行后（IP）=（ax）

---------------------

2.12 代码段

  以8086PC机举例：

在编程时，可以根据需要，将一组内存单元定义为一个段。

定义：可以将长度N（N《=64KB）的一组代码，存在一组地址连续，起始地址为16的倍数的内存单元中，这段内存是用来存放代码的，从而定义了一个代码段。



----------

  *：注意：debug之后再看，

实验一：

  Dug是程序运行时出现的错误，debug就是修正这些bug的调试。

-------------------------------

























































